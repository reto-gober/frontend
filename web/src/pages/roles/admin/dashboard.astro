---
import AdminLayout from '../../../layouts/roles/AdminLayout.astro';

// =============================================
// DATOS DE EJEMPLO (DUMMY DATA)
// =============================================

// Tipos de periodo disponibles
const periodos = [
  { value: 'mensual', label: 'Mensual' },
  { value: 'trimestral', label: 'Trimestral' },
  { value: 'anual', label: 'Anual' }
];

// KPIs del administrador - datos según periodo
const kpisData = {
  mensual: {
    usuariosActivos: 38,
    usuariosCreados: 5,
    rolesModificados: 3,
    reglasAlerta: 12,
    periodoTexto: 'en el último mes'
  },
  trimestral: {
    usuariosActivos: 42,
    usuariosCreados: 12,
    rolesModificados: 8,
    reglasAlerta: 15,
    periodoTexto: 'en el último trimestre'
  },
  anual: {
    usuariosActivos: 45,
    usuariosCreados: 28,
    rolesModificados: 15,
    reglasAlerta: 18,
    periodoTexto: 'en el último año'
  }
};

// Distribución de usuarios por rol
const distribucionUsuarios = {
  mensual: [
    { rol: 'Administradores', cantidad: 3, porcentaje: 7, color: '#3d85d1' },
    { rol: 'Responsables', cantidad: 22, porcentaje: 52, color: '#F4C453' },
    { rol: 'Supervisores', cantidad: 10, porcentaje: 24, color: '#4ADE80' },
    { rol: 'Auditores', cantidad: 7, porcentaje: 17, color: '#A78BFA' }
  ],
  trimestral: [
    { rol: 'Administradores', cantidad: 3, porcentaje: 7, color: '#3d85d1' },
    { rol: 'Responsables', cantidad: 24, porcentaje: 53, color: '#F4C453' },
    { rol: 'Supervisores', cantidad: 11, porcentaje: 24, color: '#4ADE80' },
    { rol: 'Auditores', cantidad: 7, porcentaje: 16, color: '#A78BFA' }
  ],
  anual: [
    { rol: 'Administradores', cantidad: 4, porcentaje: 9, color: '#3d85d1' },
    { rol: 'Responsables', cantidad: 25, porcentaje: 52, color: '#F4C453' },
    { rol: 'Supervisores', cantidad: 12, porcentaje: 25, color: '#4ADE80' },
    { rol: 'Auditores', cantidad: 7, porcentaje: 14, color: '#A78BFA' }
  ]
};

// Estado de entidades de control
const estadoEntidades = {
  activas: 12,
  inactivas: 3,
  total: 15
};

// Actividad administrativa reciente
const actividadReciente = [
  { usuario: 'Carlos Méndez', accion: 'Envió invitación a nuevo usuario', tiempo: 'Hace 15 minutos', avatar: 'CM', tipo: 'invitacion' },
  { usuario: 'Ana García', accion: 'Modificó rol de usuario a Supervisor', tiempo: 'Hace 1 hora', avatar: 'AG', tipo: 'rol' },
  { usuario: 'Sistema', accion: 'Usuario Juan Pérez fue deshabilitado', tiempo: 'Hace 2 horas', avatar: 'SIS', tipo: 'estado' },
  { usuario: 'Carlos Méndez', accion: 'Creó nueva entidad: MinMinas', tiempo: 'Hace 3 horas', avatar: 'CM', tipo: 'entidad' },
  { usuario: 'Ana García', accion: 'Actualizó regla de alerta preventiva', tiempo: 'Ayer, 16:30', avatar: 'AG', tipo: 'alerta' },
  { usuario: 'Sistema', accion: 'Habilitó usuario María López', tiempo: 'Ayer, 10:15', avatar: 'SIS', tipo: 'estado' }
];

// Reglas de alerta
const reglasAlerta = {
  activas: 12,
  inactivas: 3,
  promediosDias: {
    recordatorio: 15,
    preventiva: 7,
    urgente: 3
  }
};
---

<AdminLayout title="Dashboard de Administración">
  <div class="dashboard-admin">
    <!-- Barra Superior con Filtros -->
    <header class="dashboard-header-bar">
      <div class="header-left">
        <div class="period-filter">
          <label for="periodo-select" class="filter-label">Periodo:</label>
          <select id="periodo-select" class="filter-select">
            {periodos.map(p => (
              <option value={p.value}>{p.label}</option>
            ))}
          </select>
        </div>
      </div>
      <div class="header-right">
        <span class="periodo-actual" id="periodo-texto">Periodo: últimos 30 días</span>
      </div>
    </header>

    <!-- Fila de Tarjetas KPI -->
    <section class="kpis-row">
      <div class="kpi-card" data-kpi="usuariosActivos">
        <div class="kpi-icon blue">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="9" cy="7" r="4"/>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value" id="kpi-usuarios-activos">38</span>
          <span class="kpi-label">Usuarios activos</span>
          <span class="kpi-periodo" id="kpi-periodo-1">en el último mes</span>
        </div>
      </div>

      <div class="kpi-card" data-kpi="usuariosCreados">
        <div class="kpi-icon green">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
            <circle cx="8.5" cy="7" r="4"/>
            <line x1="20" y1="8" x2="20" y2="14"/>
            <line x1="23" y1="11" x2="17" y2="11"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value" id="kpi-usuarios-creados">5</span>
          <span class="kpi-label">Usuarios creados</span>
          <span class="kpi-periodo" id="kpi-periodo-2">en el último mes</span>
        </div>
      </div>

      <div class="kpi-card" data-kpi="rolesModificados">
        <div class="kpi-icon orange">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 20h9"/>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value" id="kpi-roles-mod">3</span>
          <span class="kpi-label">Roles modificados</span>
          <span class="kpi-periodo" id="kpi-periodo-3">en el último mes</span>
        </div>
      </div>

      <div class="kpi-card" data-kpi="reglasAlerta">
        <div class="kpi-icon purple">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value" id="kpi-reglas">12</span>
          <span class="kpi-label">Reglas de alerta configuradas</span>
          <span class="kpi-periodo" id="kpi-periodo-4">activas actualmente</span>
        </div>
      </div>
    </section>

    <!-- Bloque Central: Gráficas -->
    <div class="charts-row">
      <!-- Distribución de Usuarios por Rol -->
      <section class="chart-card">
        <div class="chart-header">
          <h3 class="chart-title">Distribución de Usuarios por Rol</h3>
        </div>
        <div class="chart-content">
          <div class="donut-chart-container">
            <div class="donut-chart" id="chart-usuarios">
              <svg viewBox="0 0 36 36" class="donut-svg">
                <circle cx="18" cy="18" r="15.9" fill="none" stroke="#3d85d1" stroke-width="3" stroke-dasharray="7 93" stroke-dashoffset="25"></circle>
                <circle cx="18" cy="18" r="15.9" fill="none" stroke="#F4C453" stroke-width="3" stroke-dasharray="52 48" stroke-dashoffset="18"></circle>
                <circle cx="18" cy="18" r="15.9" fill="none" stroke="#4ADE80" stroke-width="3" stroke-dasharray="24 76" stroke-dashoffset="-34"></circle>
                <circle cx="18" cy="18" r="15.9" fill="none" stroke="#A78BFA" stroke-width="3" stroke-dasharray="17 83" stroke-dashoffset="-58"></circle>
              </svg>
              <div class="donut-center">
                <span class="donut-total" id="total-usuarios">42</span>
                <span class="donut-label">usuarios</span>
              </div>
            </div>
          </div>
          <div class="chart-legend" id="legend-usuarios">
            <div class="legend-item">
              <span class="legend-color" style="background: #3d85d1"></span>
              <span class="legend-text">Administradores</span>
              <span class="legend-value">3 (7%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #F4C453"></span>
              <span class="legend-text">Responsables</span>
              <span class="legend-value">22 (52%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #4ADE80"></span>
              <span class="legend-text">Supervisores</span>
              <span class="legend-value">10 (24%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #A78BFA"></span>
              <span class="legend-text">Auditores</span>
              <span class="legend-value">7 (17%)</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Estado de Entidades de Control -->
      <section class="chart-card">
        <div class="chart-header">
          <h3 class="chart-title">Estado de Entidades de Control</h3>
        </div>
        <div class="chart-content">
          <div class="donut-chart-container">
            <div class="donut-chart">
              <svg viewBox="0 0 36 36" class="donut-svg">
                <circle cx="18" cy="18" r="15.9" fill="none" stroke="#4ADE80" stroke-width="3.5" stroke-dasharray="80 20" stroke-dashoffset="25"></circle>
                <circle cx="18" cy="18" r="15.9" fill="none" stroke="#94a3b8" stroke-width="3.5" stroke-dasharray="20 80" stroke-dashoffset="-55"></circle>
              </svg>
              <div class="donut-center">
                <span class="donut-total">{estadoEntidades.total}</span>
                <span class="donut-label">entidades</span>
              </div>
            </div>
          </div>
          <div class="chart-legend">
            <div class="legend-item">
              <span class="legend-color" style="background: #4ADE80"></span>
              <span class="legend-text">Activas</span>
              <span class="legend-value">{estadoEntidades.activas} (80%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color" style="background: #94a3b8"></span>
              <span class="legend-text">Inactivas</span>
              <span class="legend-value">{estadoEntidades.inactivas} (20%)</span>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Fila Inferior: Actividad y Reglas -->
    <div class="bottom-row">
      <!-- Actividad Administrativa Reciente -->
      <section class="activity-card">
        <div class="card-header">
          <h3 class="card-title">Actividad Administrativa Reciente</h3>
          <a href="/admin/usuarios" class="view-all-link">Ver todo</a>
        </div>
        <div class="activity-list" id="activity-list">
          {actividadReciente.map(item => (
            <div class="activity-item">
              <div class={`activity-avatar ${item.tipo}`}>
                {item.avatar}
              </div>
              <div class="activity-content">
                <div class="activity-text">
                  <strong>{item.usuario}</strong> {item.accion}
                </div>
                <span class="activity-time">{item.tiempo}</span>
              </div>
              <span class={`activity-tag ${item.tipo}`}>
                {item.tipo === 'invitacion' ? 'Invitación' : 
                 item.tipo === 'rol' ? 'Rol' : 
                 item.tipo === 'estado' ? 'Estado' : 
                 item.tipo === 'entidad' ? 'Entidad' : 'Alerta'}
              </span>
            </div>
          ))}
        </div>
      </section>

      <!-- Resumen de Reglas de Alerta -->
      <section class="alerts-summary-card">
        <div class="card-header">
          <h3 class="card-title">Resumen de Reglas de Alerta</h3>
          <a href="/admin/configuracion" class="view-all-link">Configurar</a>
        </div>
        <div class="alerts-summary-content">
          <div class="alerts-status">
            <div class="alert-status-item active">
              <span class="status-count">{reglasAlerta.activas}</span>
              <span class="status-label">Activas</span>
            </div>
            <div class="alert-status-item inactive">
              <span class="status-count">{reglasAlerta.inactivas}</span>
              <span class="status-label">Inactivas</span>
            </div>
          </div>
          
          <div class="alerts-timing">
            <h4 class="timing-title">Promedio de días de anticipación</h4>
            <div class="timing-bars">
              <div class="timing-bar-item">
                <div class="timing-bar-header">
                  <span class="timing-label">Recordatorio</span>
                  <span class="timing-value">{reglasAlerta.promediosDias.recordatorio} días</span>
                </div>
                <div class="timing-bar">
                  <div class="timing-bar-fill info" style="width: 100%"></div>
                </div>
              </div>
              <div class="timing-bar-item">
                <div class="timing-bar-header">
                  <span class="timing-label">Preventiva</span>
                  <span class="timing-value">{reglasAlerta.promediosDias.preventiva} días</span>
                </div>
                <div class="timing-bar">
                  <div class="timing-bar-fill warning" style="width: 47%"></div>
                </div>
              </div>
              <div class="timing-bar-item">
                <div class="timing-bar-header">
                  <span class="timing-label">Urgente</span>
                  <span class="timing-value">{reglasAlerta.promediosDias.urgente} días</span>
                </div>
                <div class="timing-bar">
                  <div class="timing-bar-fill danger" style="width: 20%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</AdminLayout>

<script>
  // Datos dummy para actualizar según periodo
  const kpisData = {
    mensual: {
      usuariosActivos: 38,
      usuariosCreados: 5,
      rolesModificados: 3,
      reglasAlerta: 12,
      periodoTexto: 'en el último mes',
      periodoLabel: 'Periodo: últimos 30 días'
    },
    trimestral: {
      usuariosActivos: 42,
      usuariosCreados: 12,
      rolesModificados: 8,
      reglasAlerta: 15,
      periodoTexto: 'en el último trimestre',
      periodoLabel: 'Periodo: últimos 3 meses'
    },
    anual: {
      usuariosActivos: 45,
      usuariosCreados: 28,
      rolesModificados: 15,
      reglasAlerta: 18,
      periodoTexto: 'en el último año',
      periodoLabel: 'Periodo: últimos 12 meses'
    }
  };

  const distribucionUsuarios = {
    mensual: [
      { rol: 'Administradores', cantidad: 3, porcentaje: 7 },
      { rol: 'Responsables', cantidad: 22, porcentaje: 52 },
      { rol: 'Supervisores', cantidad: 10, porcentaje: 24 },
      { rol: 'Auditores', cantidad: 7, porcentaje: 17 }
    ],
    trimestral: [
      { rol: 'Administradores', cantidad: 3, porcentaje: 7 },
      { rol: 'Responsables', cantidad: 24, porcentaje: 53 },
      { rol: 'Supervisores', cantidad: 11, porcentaje: 24 },
      { rol: 'Auditores', cantidad: 7, porcentaje: 16 }
    ],
    anual: [
      { rol: 'Administradores', cantidad: 4, porcentaje: 9 },
      { rol: 'Responsables', cantidad: 25, porcentaje: 52 },
      { rol: 'Supervisores', cantidad: 12, porcentaje: 25 },
      { rol: 'Auditores', cantidad: 7, porcentaje: 14 }
    ]
  };

  // Función para actualizar el dashboard según el periodo seleccionado
  function actualizarDashboard(periodo: string) {
    const data = kpisData[periodo as keyof typeof kpisData];
    const usuarios = distribucionUsuarios[periodo as keyof typeof distribucionUsuarios];
    
    // Actualizar KPIs
    const kpiUsuariosActivos = document.getElementById('kpi-usuarios-activos');
    const kpiUsuariosCreados = document.getElementById('kpi-usuarios-creados');
    const kpiRolesMod = document.getElementById('kpi-roles-mod');
    const kpiReglas = document.getElementById('kpi-reglas');
    const periodoTexto = document.getElementById('periodo-texto');
    
    if (kpiUsuariosActivos) kpiUsuariosActivos.textContent = data.usuariosActivos.toString();
    if (kpiUsuariosCreados) kpiUsuariosCreados.textContent = data.usuariosCreados.toString();
    if (kpiRolesMod) kpiRolesMod.textContent = data.rolesModificados.toString();
    if (kpiReglas) kpiReglas.textContent = data.reglasAlerta.toString();
    if (periodoTexto) periodoTexto.textContent = data.periodoLabel;
    
    // Actualizar textos de periodo en KPIs
    const periodosTextos = document.querySelectorAll('.kpi-periodo');
    periodosTextos.forEach((el, index) => {
      if (index < 3) {
        el.textContent = data.periodoTexto;
      }
    });
    
    // Actualizar total de usuarios
    const totalUsuarios = document.getElementById('total-usuarios');
    const total = usuarios.reduce((sum, u) => sum + u.cantidad, 0);
    if (totalUsuarios) totalUsuarios.textContent = total.toString();
    
    // Actualizar leyenda
    const legendItems = document.querySelectorAll('#legend-usuarios .legend-item');
    usuarios.forEach((u, index) => {
      const item = legendItems[index];
      if (item) {
        const valueEl = item.querySelector('.legend-value');
        if (valueEl) valueEl.textContent = `${u.cantidad} (${u.porcentaje}%)`;
      }
    });
  }

  // Event listener para el filtro de periodo
  document.addEventListener('DOMContentLoaded', () => {
    const selectPeriodo = document.getElementById('periodo-select') as HTMLSelectElement;
    if (selectPeriodo) {
      selectPeriodo.addEventListener('change', (e) => {
        const target = e.target as HTMLSelectElement;
        actualizarDashboard(target.value);
      });
    }
  });
</script>

<style>
  .dashboard-admin {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  /* Header Bar con Filtros */
  .dashboard-header-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
  }

  .header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .period-filter {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .filter-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--neutral-600);
  }

  .filter-select {
    padding: 0.5rem 2rem 0.5rem 0.75rem;
    border: 1px solid var(--neutral-300);
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--neutral-700);
    background: white;
    cursor: pointer;
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23475569' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    transition: border-color 0.2s;
  }

  .filter-select:hover {
    border-color: var(--color-primary-400);
  }

  .filter-select:focus {
    outline: none;
    border-color: var(--color-primary-500);
    box-shadow: 0 0 0 3px rgba(61, 133, 209, 0.1);
  }

  .periodo-actual {
    font-size: 0.8125rem;
    color: var(--neutral-500);
    padding: 0.375rem 0.75rem;
    background: var(--neutral-100);
    border-radius: 6px;
  }

  /* KPIs Row */
  .kpis-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }

  @media (max-width: 1200px) {
    .kpis-row {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (max-width: 640px) {
    .kpis-row {
      grid-template-columns: 1fr;
    }
  }

  .kpi-card {
    background: white;
    border-radius: 12px;
    padding: 1.25rem;
    box-shadow: var(--shadow-card);
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    transition: all 0.2s ease;
  }

  .kpi-card:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-2px);
  }

  .kpi-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .kpi-icon.blue { background: var(--color-primary-100); color: var(--color-primary-600); }
  .kpi-icon.green { background: var(--success-green-100); color: var(--success-green-600); }
  .kpi-icon.orange { background: var(--accent-orange-100); color: var(--accent-orange-600); }
  .kpi-icon.purple { background: var(--secondary-purple-100); color: var(--secondary-purple-600); }

  .kpi-content {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .kpi-value {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--neutral-900);
    line-height: 1;
  }

  .kpi-label {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--neutral-700);
  }

  .kpi-periodo {
    font-size: 0.75rem;
    color: var(--neutral-500);
  }

  /* Charts Row */
  .charts-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }

  @media (max-width: 1024px) {
    .charts-row {
      grid-template-columns: 1fr;
    }
  }

  .chart-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: var(--shadow-card);
  }

  .chart-header {
    margin-bottom: 1.25rem;
  }

  .chart-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--neutral-800);
    margin: 0;
  }

  .chart-content {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  @media (max-width: 640px) {
    .chart-content {
      flex-direction: column;
    }
  }

  /* Donut Chart */
  .donut-chart-container {
    flex-shrink: 0;
  }

  .donut-chart {
    position: relative;
    width: 140px;
    height: 140px;
  }

  .donut-svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
  }

  .donut-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
  }

  .donut-total {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-900);
    line-height: 1;
  }

  .donut-label {
    display: block;
    font-size: 0.6875rem;
    color: var(--neutral-500);
    margin-top: 0.25rem;
  }

  /* Chart Legend */
  .chart-legend {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    flex: 1;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .legend-color {
    width: 12px;
    height: 12px;
    border-radius: 3px;
    flex-shrink: 0;
  }

  .legend-text {
    font-size: 0.8125rem;
    color: var(--neutral-700);
    flex: 1;
  }

  .legend-value {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--neutral-800);
  }

  /* Bottom Row */
  .bottom-row {
    display: grid;
    grid-template-columns: 1.2fr 0.8fr;
    gap: 1.5rem;
  }

  @media (max-width: 1024px) {
    .bottom-row {
      grid-template-columns: 1fr;
    }
  }

  .activity-card,
  .alerts-summary-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: var(--shadow-card);
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.25rem;
  }

  .card-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--neutral-800);
    margin: 0;
  }

  .view-all-link {
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--color-primary-600);
    text-decoration: none;
  }

  .view-all-link:hover {
    text-decoration: underline;
  }

  /* Activity List */
  .activity-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    max-height: 380px;
    overflow-y: auto;
  }

  .activity-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem;
    background: var(--neutral-50);
    border-radius: 8px;
    transition: background 0.2s;
  }

  .activity-item:hover {
    background: var(--neutral-100);
  }

  .activity-avatar {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6875rem;
    font-weight: 600;
    color: white;
    flex-shrink: 0;
  }

  .activity-avatar.invitacion { background: var(--color-primary-600); }
  .activity-avatar.rol { background: var(--secondary-purple-600); }
  .activity-avatar.estado { background: var(--neutral-500); }
  .activity-avatar.entidad { background: var(--accent-orange-600); }
  .activity-avatar.alerta { background: var(--warning-yellow-600); }

  .activity-content {
    flex: 1;
    min-width: 0;
  }

  .activity-text {
    font-size: 0.8125rem;
    color: var(--neutral-700);
    line-height: 1.4;
  }

  .activity-text strong {
    color: var(--neutral-800);
  }

  .activity-time {
    font-size: 0.6875rem;
    color: var(--neutral-500);
    display: block;
    margin-top: 0.25rem;
  }

  .activity-tag {
    font-size: 0.625rem;
    font-weight: 600;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    text-transform: uppercase;
    flex-shrink: 0;
  }

  .activity-tag.invitacion { background: var(--color-primary-100); color: var(--color-primary-700); }
  .activity-tag.rol { background: var(--secondary-purple-100); color: var(--secondary-purple-700); }
  .activity-tag.estado { background: var(--neutral-200); color: var(--neutral-700); }
  .activity-tag.entidad { background: var(--accent-orange-100); color: var(--accent-orange-700); }
  .activity-tag.alerta { background: var(--warning-yellow-100); color: var(--warning-yellow-700); }

  /* Alerts Summary */
  .alerts-summary-content {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .alerts-status {
    display: flex;
    gap: 1rem;
  }

  .alert-status-item {
    flex: 1;
    text-align: center;
    padding: 1rem;
    border-radius: 10px;
  }

  .alert-status-item.active {
    background: var(--success-green-50);
    border: 1px solid var(--success-green-200);
  }

  .alert-status-item.inactive {
    background: var(--neutral-100);
    border: 1px solid var(--neutral-200);
  }

  .status-count {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    line-height: 1;
  }

  .alert-status-item.active .status-count { color: var(--success-green-700); }
  .alert-status-item.inactive .status-count { color: var(--neutral-600); }

  .status-label {
    display: block;
    font-size: 0.75rem;
    font-weight: 500;
    margin-top: 0.25rem;
  }

  .alert-status-item.active .status-label { color: var(--success-green-600); }
  .alert-status-item.inactive .status-label { color: var(--neutral-500); }

  .timing-title {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--neutral-700);
    margin: 0 0 0.75rem 0;
  }

  .timing-bars {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .timing-bar-item {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  .timing-bar-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .timing-label {
    font-size: 0.75rem;
    color: var(--neutral-600);
  }

  .timing-value {
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--neutral-800);
  }

  .timing-bar {
    height: 8px;
    background: var(--neutral-200);
    border-radius: 4px;
    overflow: hidden;
  }

  .timing-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
  }

  .timing-bar-fill.info { background: var(--color-primary-500); }
  .timing-bar-fill.warning { background: var(--warning-yellow-500); }
  .timing-bar-fill.danger { background: var(--error-red-500); }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 2rem;
    color: var(--neutral-500);
  }

  .empty-state svg {
    width: 48px;
    height: 48px;
    margin-bottom: 0.75rem;
    opacity: 0.5;
  }

  .empty-state-text {
    font-size: 0.875rem;
  }
</style>
