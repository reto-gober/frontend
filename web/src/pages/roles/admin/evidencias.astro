---
import AdminLayout from '../../../layouts/roles/AdminLayout.astro';
---

<AdminLayout title="Evidencias">
  <div class="evidencias-page">
    <!-- Header -->
    <div class="page-header">
      <div class="header-info">
        <h1 class="page-title">Gestión de Evidencias</h1>
        <p class="page-description">Visualiza y administra los archivos de soporte de reportes</p>
      </div>
      <div class="header-actions">
        <button class="btn-secondary">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Exportar Lista
        </button>
      </div>
    </div>

    <!-- Estadísticas -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="stat-icon blue">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">1,248</span>
          <span class="stat-label">Archivos totales</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon green">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">892</span>
          <span class="stat-label">Validadas</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon orange">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">356</span>
          <span class="stat-label">Pendientes de revisión</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon purple">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
          </svg>
        </div>
        <div class="stat-content">
          <span class="stat-value">2.4 GB</span>
          <span class="stat-label">Almacenamiento usado</span>
        </div>
      </div>
    </div>

    <!-- Filtros -->
    <div class="filters-bar">
      <div class="search-box">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="M21 21l-4.35-4.35"/>
        </svg>
        <input type="text" placeholder="Buscar evidencias por nombre o reporte..." class="search-input" />
      </div>
      <div class="filter-group">
        <select class="filter-select">
          <option value="">Todas las entidades</option>
          <option value="creg">CREG</option>
          <option value="sui">SUI</option>
          <option value="anh">ANH</option>
          <option value="sspd">SSPD</option>
        </select>
        <select class="filter-select">
          <option value="">Tipo de archivo</option>
          <option value="pdf">PDF</option>
          <option value="excel">Excel</option>
          <option value="word">Word</option>
          <option value="imagen">Imagen</option>
        </select>
        <select class="filter-select">
          <option value="">Estado</option>
          <option value="validada">Validada</option>
          <option value="pendiente">Pendiente</option>
          <option value="rechazada">Rechazada</option>
        </select>
      </div>
    </div>

    <!-- Grid de evidencias -->
    <div class="evidencias-grid">
      <!-- Evidencia 1 -->
      <div class="evidencia-card">
        <div class="file-preview pdf">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          <span class="file-type">PDF</span>
        </div>
        <div class="evidencia-info">
          <h4 class="file-name">InformeComercial_Feb2025.pdf</h4>
          <div class="file-meta">
            <span class="reporte-ref">SUI-001</span>
            <span class="file-size">2.4 MB</span>
          </div>
          <div class="file-footer">
            <span class="status-badge validated">Validada</span>
            <span class="upload-date">Hace 2 horas</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="btn-icon" title="Ver">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" title="Descargar">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Evidencia 2 -->
      <div class="evidencia-card">
        <div class="file-preview excel">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <path d="M8 13h2"/>
            <path d="M8 17h2"/>
            <path d="M14 13h2"/>
            <path d="M14 17h2"/>
          </svg>
          <span class="file-type">XLSX</span>
        </div>
        <div class="evidencia-info">
          <h4 class="file-name">DatosProduccion_Enero.xlsx</h4>
          <div class="file-meta">
            <span class="reporte-ref">ANH-012</span>
            <span class="file-size">1.8 MB</span>
          </div>
          <div class="file-footer">
            <span class="status-badge validated">Validada</span>
            <span class="upload-date">Ayer</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="btn-icon" title="Ver">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" title="Descargar">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Evidencia 3 -->
      <div class="evidencia-card">
        <div class="file-preview pdf">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
          </svg>
          <span class="file-type">PDF</span>
        </div>
        <div class="evidencia-info">
          <h4 class="file-name">ResolucionTarifaria_Q1.pdf</h4>
          <div class="file-meta">
            <span class="reporte-ref">CREG-045</span>
            <span class="file-size">3.2 MB</span>
          </div>
          <div class="file-footer">
            <span class="status-badge pending">Pendiente</span>
            <span class="upload-date">Hace 3 horas</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="btn-icon" title="Ver">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" title="Descargar">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Evidencia 4 -->
      <div class="evidencia-card">
        <div class="file-preview image">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
            <circle cx="8.5" cy="8.5" r="1.5"/>
            <polyline points="21 15 16 10 5 21"/>
          </svg>
          <span class="file-type">PNG</span>
        </div>
        <div class="evidencia-info">
          <h4 class="file-name">Captura_Radicado_SUI.png</h4>
          <div class="file-meta">
            <span class="reporte-ref">SUI-008</span>
            <span class="file-size">548 KB</span>
          </div>
          <div class="file-footer">
            <span class="status-badge validated">Validada</span>
            <span class="upload-date">Hace 5 días</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="btn-icon" title="Ver">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" title="Descargar">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Evidencia 5 -->
      <div class="evidencia-card">
        <div class="file-preview word">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <line x1="10" y1="9" x2="8" y2="9"/>
          </svg>
          <span class="file-type">DOCX</span>
        </div>
        <div class="evidencia-info">
          <h4 class="file-name">IndicadoresGestion_Sem1.docx</h4>
          <div class="file-meta">
            <span class="reporte-ref">SSPD-023</span>
            <span class="file-size">892 KB</span>
          </div>
          <div class="file-footer">
            <span class="status-badge pending">Pendiente</span>
            <span class="upload-date">Hace 1 día</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="btn-icon" title="Ver">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" title="Descargar">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Evidencia 6 -->
      <div class="evidencia-card">
        <div class="file-preview excel">
          <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <path d="M8 13h2"/>
            <path d="M8 17h2"/>
            <path d="M14 13h2"/>
            <path d="M14 17h2"/>
          </svg>
          <span class="file-type">XLSX</span>
        </div>
        <div class="evidencia-info">
          <h4 class="file-name">BalanceEnergetico_Ene.xlsx</h4>
          <div class="file-meta">
            <span class="reporte-ref">CREG-102</span>
            <span class="file-size">4.1 MB</span>
          </div>
          <div class="file-footer">
            <span class="status-badge validated">Validada</span>
            <span class="upload-date">Hace 2 días</span>
          </div>
        </div>
        <div class="card-actions">
          <button class="btn-icon" title="Ver">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
          <button class="btn-icon" title="Descargar">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7,10 12,15 17,10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Paginación -->
    <div class="pagination">
      <span class="pagination-info">Mostrando 1-6 de 1,248 evidencias</span>
      <div class="pagination-controls">
        <button class="pagination-btn" disabled>
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
        </button>
        <button class="pagination-btn active">1</button>
        <button class="pagination-btn">2</button>
        <button class="pagination-btn">3</button>
        <span class="pagination-ellipsis">...</span>
        <button class="pagination-btn">208</button>
        <button class="pagination-btn">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9,18 15,12 9,6"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</AdminLayout>

<style>
  .evidencias-page {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .page-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-900);
    margin: 0;
  }

  .page-description {
    font-size: 0.875rem;
    color: var(--neutral-500);
    margin: 0.25rem 0 0;
  }

  .btn-secondary {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: white;
    color: var(--neutral-600);
    border: 1px solid var(--neutral-200);
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-secondary:hover {
    background: var(--neutral-100);
  }

  /* Stats Row */
  .stats-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
  }

  .stat-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    padding: 1.25rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .stat-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .stat-icon.blue { background: var(--color-primary-100); color: var(--color-primary-600); }
  .stat-icon.green { background: var(--success-green-100); color: var(--success-green-600); }
  .stat-icon.orange { background: var(--accent-orange-100); color: var(--accent-orange-600); }
  .stat-icon.purple { background: var(--secondary-purple-100); color: var(--secondary-purple-600); }

  .stat-content {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-900);
    line-height: 1;
  }

  .stat-label {
    font-size: 0.8125rem;
    color: var(--neutral-500);
    margin-top: 0.25rem;
  }

  /* Filtros */
  .filters-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    padding: 1rem;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
  }

  .search-box {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--neutral-100);
    border-radius: 8px;
    min-width: 300px;
  }

  .search-box svg {
    color: var(--neutral-400);
  }

  .search-input {
    border: none;
    background: transparent;
    outline: none;
    font-size: 0.875rem;
    width: 100%;
  }

  .filter-group {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .filter-select {
    padding: 0.5rem 1rem;
    border: 1px solid var(--neutral-200);
    border-radius: 8px;
    font-size: 0.875rem;
    background: white;
    cursor: pointer;
  }

  /* Grid de evidencias */
  .evidencias-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1rem;
  }

  .evidencia-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    padding: 1rem;
    display: flex;
    gap: 1rem;
    position: relative;
    transition: all 0.2s;
  }

  .evidencia-card:hover {
    box-shadow: var(--shadow-hover);
  }

  .file-preview {
    width: 64px;
    height: 64px;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    flex-shrink: 0;
  }

  .file-preview.pdf {
    background: var(--error-red-100);
    color: var(--error-red-600);
  }

  .file-preview.excel {
    background: var(--success-green-100);
    color: var(--success-green-600);
  }

  .file-preview.word {
    background: var(--color-primary-100);
    color: var(--color-primary-600);
  }

  .file-preview.image {
    background: var(--secondary-purple-100);
    color: var(--secondary-purple-600);
  }

  .file-type {
    font-size: 0.625rem;
    font-weight: 700;
    text-transform: uppercase;
  }

  .evidencia-info {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
  }

  .file-name {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--neutral-800);
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .file-meta {
    display: flex;
    gap: 0.75rem;
    font-size: 0.75rem;
    color: var(--neutral-500);
  }

  .reporte-ref {
    font-family: monospace;
    font-weight: 500;
    color: var(--color-primary-600);
  }

  .file-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: auto;
  }

  .status-badge {
    display: inline-flex;
    padding: 0.125rem 0.5rem;
    border-radius: 4px;
    font-size: 0.6875rem;
    font-weight: 600;
  }

  .status-badge.validated {
    background: var(--success-green-100);
    color: var(--success-green-700);
  }

  .status-badge.pending {
    background: var(--warning-yellow-100);
    color: var(--warning-yellow-700);
  }

  .status-badge.rejected {
    background: var(--error-red-100);
    color: var(--error-red-700);
  }

  .upload-date {
    font-size: 0.6875rem;
    color: var(--neutral-400);
  }

  .card-actions {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    opacity: 0;
    transition: opacity 0.2s;
  }

  .evidencia-card:hover .card-actions {
    opacity: 1;
  }

  .btn-icon {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--neutral-200);
    border-radius: 6px;
    background: white;
    color: var(--neutral-600);
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-icon:hover {
    background: var(--neutral-100);
    color: var(--neutral-800);
  }

  /* Pagination */
  .pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
  }

  .pagination-info {
    font-size: 0.875rem;
    color: var(--neutral-600);
  }

  .pagination-controls {
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  .pagination-btn {
    min-width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--neutral-200);
    border-radius: 6px;
    background: white;
    font-size: 0.875rem;
    color: var(--neutral-600);
    cursor: pointer;
    transition: all 0.2s;
  }

  .pagination-btn:hover:not(:disabled) {
    background: var(--neutral-100);
  }

  .pagination-btn.active {
    background: var(--color-primary-600);
    border-color: var(--color-primary-600);
    color: white;
  }

  .pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .pagination-ellipsis {
    padding: 0 0.5rem;
    color: var(--neutral-400);
  }
</style>

