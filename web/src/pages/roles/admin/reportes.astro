---
import AdminLayout from '../../../layouts/roles/AdminLayout.astro';
---

<AdminLayout title="Gestión de Reportes">
  <div class="reportes-page">
    <!-- Header con acciones -->
    <div class="page-header">
      <div class="header-info">
        <h1 class="page-title">Gestión de Reportes</h1>
        <p class="page-description">Vista global de todos los reportes del sistema</p>
      </div>
      <div class="header-actions">
        <button class="btn-secondary">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Exportar
        </button>
        <button class="btn-primary">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="12" y1="11" x2="12" y2="17"/>
            <line x1="9" y1="14" x2="15" y2="14"/>
          </svg>
          Nuevo Reporte
        </button>
      </div>
    </div>

    <!-- Stats de estados -->
    <div class="status-stats">
      <div class="status-card all active">
        <span class="status-count">248</span>
        <span class="status-label">Todos</span>
      </div>
      <div class="status-card pending">
        <span class="status-count">32</span>
        <span class="status-label">Pendientes</span>
      </div>
      <div class="status-card progress">
        <span class="status-count">52</span>
        <span class="status-label">En Progreso</span>
      </div>
      <div class="status-card sent">
        <span class="status-count">156</span>
        <span class="status-label">Enviados</span>
      </div>
      <div class="status-card overdue">
        <span class="status-count">8</span>
        <span class="status-label">Vencidos</span>
      </div>
    </div>

    <!-- Filtros y búsqueda -->
    <div class="filters-bar">
      <div class="search-box">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
          <circle cx="11" cy="11" r="8"/>
          <path d="M21 21l-4.35-4.35"/>
        </svg>
        <input type="text" placeholder="Buscar reportes por código o nombre..." class="search-input" />
      </div>
      <div class="filter-group">
        <select class="filter-select">
          <option value="">Todas las entidades</option>
          <option value="creg">CREG</option>
          <option value="sui">SUI</option>
          <option value="anh">ANH</option>
          <option value="sspd">SSPD</option>
        </select>
        <select class="filter-select">
          <option value="">Todos los responsables</option>
          <option value="juan">Juan Rodríguez</option>
          <option value="maria">María Castro</option>
          <option value="pedro">Pedro Martínez</option>
        </select>
        <select class="filter-select">
          <option value="">Frecuencia</option>
          <option value="mensual">Mensual</option>
          <option value="trimestral">Trimestral</option>
          <option value="semestral">Semestral</option>
          <option value="anual">Anual</option>
        </select>
        <input type="month" class="filter-select" />
      </div>
    </div>

    <!-- Tabla de reportes -->
    <div class="table-container">
      <table class="reportes-table">
        <thead>
          <tr>
            <th>Código</th>
            <th>Nombre del Reporte</th>
            <th>Entidad</th>
            <th>Responsable</th>
            <th>Frecuencia</th>
            <th>Vencimiento</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="code-badge">SUI-001</span></td>
            <td>Informe Comercial de Gas Natural</td>
            <td>
              <span class="entidad-badge orange">SUI</span>
            </td>
            <td>
              <div class="responsable-cell">
                <div class="avatar blue">JR</div>
                <span>Juan Rodríguez</span>
              </div>
            </td>
            <td>Mensual</td>
            <td>
              <div class="vencimiento-cell">
                <span class="fecha">15 Feb 2025</span>
                <span class="dias remaining">En 5 días</span>
              </div>
            </td>
            <td><span class="status-badge progress">En Progreso</span></td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Ver detalle">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
                <button class="btn-icon" title="Editar">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td><span class="code-badge">CREG-045</span></td>
            <td>Resolución Tarifaria</td>
            <td>
              <span class="entidad-badge blue">CREG</span>
            </td>
            <td>
              <div class="responsable-cell">
                <div class="avatar green">MC</div>
                <span>María Castro</span>
              </div>
            </td>
            <td>Trimestral</td>
            <td>
              <div class="vencimiento-cell">
                <span class="fecha">28 Feb 2025</span>
                <span class="dias remaining">En 18 días</span>
              </div>
            </td>
            <td><span class="status-badge pending">Pendiente</span></td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Ver detalle">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
                <button class="btn-icon" title="Editar">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td><span class="code-badge">ANH-012</span></td>
            <td>Informe de Producción</td>
            <td>
              <span class="entidad-badge green">ANH</span>
            </td>
            <td>
              <div class="responsable-cell">
                <div class="avatar orange">PM</div>
                <span>Pedro Martínez</span>
              </div>
            </td>
            <td>Mensual</td>
            <td>
              <div class="vencimiento-cell">
                <span class="fecha">10 Feb 2025</span>
                <span class="dias sent">Enviado</span>
              </div>
            </td>
            <td><span class="status-badge sent">Enviado</span></td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Ver detalle">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
                <button class="btn-icon" title="Editar">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          <tr class="row-alert">
            <td><span class="code-badge">SUI-008</span></td>
            <td>Informe de Calidad del Servicio</td>
            <td>
              <span class="entidad-badge orange">SUI</span>
            </td>
            <td>
              <div class="responsable-cell">
                <div class="avatar blue">JR</div>
                <span>Juan Rodríguez</span>
              </div>
            </td>
            <td>Mensual</td>
            <td>
              <div class="vencimiento-cell">
                <span class="fecha">05 Feb 2025</span>
                <span class="dias overdue">Vencido hace 5 días</span>
              </div>
            </td>
            <td><span class="status-badge overdue">Vencido</span></td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Ver detalle">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
                <button class="btn-icon" title="Editar">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td><span class="code-badge">SSPD-023</span></td>
            <td>Indicadores de Gestión</td>
            <td>
              <span class="entidad-badge purple">SSPD</span>
            </td>
            <td>
              <div class="responsable-cell">
                <div class="avatar green">MC</div>
                <span>María Castro</span>
              </div>
            </td>
            <td>Semestral</td>
            <td>
              <div class="vencimiento-cell">
                <span class="fecha">31 Mar 2025</span>
                <span class="dias remaining">En 49 días</span>
              </div>
            </td>
            <td><span class="status-badge progress">En Progreso</span></td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Ver detalle">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
                <button class="btn-icon" title="Editar">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td><span class="code-badge">CREG-102</span></td>
            <td>Balance Energético Mensual</td>
            <td>
              <span class="entidad-badge blue">CREG</span>
            </td>
            <td>
              <div class="responsable-cell">
                <div class="avatar orange">PM</div>
                <span>Pedro Martínez</span>
              </div>
            </td>
            <td>Mensual</td>
            <td>
              <div class="vencimiento-cell">
                <span class="fecha">08 Feb 2025</span>
                <span class="dias sent">Enviado</span>
              </div>
            </td>
            <td><span class="status-badge sent">Enviado</span></td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon" title="Ver detalle">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                    <circle cx="12" cy="12" r="3"/>
                  </svg>
                </button>
                <button class="btn-icon" title="Editar">
                  <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                  </svg>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Paginación -->
    <div class="pagination">
      <span class="pagination-info">Mostrando 1-6 de 248 reportes</span>
      <div class="pagination-controls">
        <button class="pagination-btn" disabled>
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
        </button>
        <button class="pagination-btn active">1</button>
        <button class="pagination-btn">2</button>
        <button class="pagination-btn">3</button>
        <span class="pagination-ellipsis">...</span>
        <button class="pagination-btn">42</button>
        <button class="pagination-btn">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="9,18 15,12 9,6"/>
          </svg>
        </button>
      </div>
    </div>
  </div>
</AdminLayout>

<style>
  .reportes-page {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .page-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-900);
    margin: 0;
  }

  .page-description {
    font-size: 0.875rem;
    color: var(--neutral-500);
    margin: 0.25rem 0 0;
  }

  .header-actions {
    display: flex;
    gap: 0.75rem;
  }

  .btn-primary,
  .btn-secondary {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-primary {
    background: var(--color-primary-600);
    color: white;
    border: none;
  }

  .btn-primary:hover {
    background: var(--color-primary-700);
  }

  .btn-secondary {
    background: white;
    color: var(--neutral-600);
    border: 1px solid var(--neutral-200);
  }

  .btn-secondary:hover {
    background: var(--neutral-100);
  }

  /* Status Stats */
  .status-stats {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .status-card {
    flex: 1;
    min-width: 120px;
    padding: 1rem;
    background: white;
    border-radius: 10px;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s;
  }

  .status-card:hover {
    box-shadow: var(--shadow-card);
  }

  .status-card.active {
    border-color: var(--color-primary-500);
    background: var(--color-primary-50);
  }

  .status-card.pending .status-count { color: var(--warning-yellow-600); }
  .status-card.progress .status-count { color: var(--color-primary-600); }
  .status-card.sent .status-count { color: var(--success-green-600); }
  .status-card.overdue .status-count { color: var(--error-red-500); }

  .status-count {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-800);
  }

  .status-label {
    font-size: 0.75rem;
    color: var(--neutral-500);
    margin-top: 0.25rem;
  }

  /* Filtros */
  .filters-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    padding: 1rem;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
  }

  .search-box {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: var(--neutral-100);
    border-radius: 8px;
    min-width: 300px;
  }

  .search-box svg {
    color: var(--neutral-400);
  }

  .search-input {
    border: none;
    background: transparent;
    outline: none;
    font-size: 0.875rem;
    width: 100%;
  }

  .filter-group {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .filter-select {
    padding: 0.5rem 1rem;
    border: 1px solid var(--neutral-200);
    border-radius: 8px;
    font-size: 0.875rem;
    background: white;
    cursor: pointer;
  }

  /* Tabla */
  .table-container {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    overflow: hidden;
    overflow-x: auto;
  }

  .reportes-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 900px;
  }

  .reportes-table th,
  .reportes-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--neutral-100);
  }

  .reportes-table th {
    background: var(--neutral-50);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--neutral-600);
  }

  .reportes-table td {
    font-size: 0.875rem;
    color: var(--neutral-700);
  }

  .reportes-table tr:hover {
    background: var(--neutral-50);
  }

  .reportes-table tr.row-alert {
    background: var(--error-red-50);
  }

  .reportes-table tr.row-alert:hover {
    background: var(--error-red-100);
  }

  .code-badge {
    display: inline-flex;
    padding: 0.25rem 0.5rem;
    background: var(--neutral-100);
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 600;
    font-family: monospace;
    color: var(--neutral-700);
  }

  .entidad-badge {
    display: inline-flex;
    padding: 0.25rem 0.75rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .entidad-badge.blue { background: var(--color-primary-100); color: var(--color-primary-700); }
  .entidad-badge.orange { background: #FEF3C7; color: #92400E; }
  .entidad-badge.green { background: var(--success-green-100); color: var(--success-green-700); }
  .entidad-badge.purple { background: var(--secondary-purple-100); color: var(--secondary-purple-700); }

  .responsable-cell {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .avatar {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.625rem;
    font-weight: 600;
    color: white;
  }

  .avatar.blue { background: var(--color-primary-600); }
  .avatar.green { background: var(--success-green-600); }
  .avatar.orange { background: var(--accent-orange-600); }

  .vencimiento-cell {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .fecha {
    font-size: 0.8125rem;
    color: var(--neutral-700);
  }

  .dias {
    font-size: 0.6875rem;
    font-weight: 500;
  }

  .dias.remaining { color: var(--color-primary-600); }
  .dias.sent { color: var(--success-green-600); }
  .dias.overdue { color: var(--error-red-500); }

  /* Status badges */
  .status-badge {
    display: inline-flex;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 500;
  }

  .status-badge.pending {
    background: var(--warning-yellow-100);
    color: var(--warning-yellow-700);
  }

  .status-badge.progress {
    background: var(--color-primary-100);
    color: var(--color-primary-700);
  }

  .status-badge.sent {
    background: var(--success-green-100);
    color: var(--success-green-700);
  }

  .status-badge.overdue {
    background: var(--error-red-100);
    color: var(--error-red-700);
  }

  /* Action buttons */
  .action-buttons {
    display: flex;
    gap: 0.5rem;
  }

  .btn-icon {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--neutral-200);
    border-radius: 6px;
    background: white;
    color: var(--neutral-600);
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-icon:hover {
    background: var(--neutral-100);
    color: var(--neutral-800);
  }

  /* Pagination */
  .pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
  }

  .pagination-info {
    font-size: 0.875rem;
    color: var(--neutral-600);
  }

  .pagination-controls {
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }

  .pagination-btn {
    min-width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--neutral-200);
    border-radius: 6px;
    background: white;
    font-size: 0.875rem;
    color: var(--neutral-600);
    cursor: pointer;
    transition: all 0.2s;
  }

  .pagination-btn:hover:not(:disabled) {
    background: var(--neutral-100);
  }

  .pagination-btn.active {
    background: var(--color-primary-600);
    border-color: var(--color-primary-600);
    color: white;
  }

  .pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .pagination-ellipsis {
    padding: 0 0.5rem;
    color: var(--neutral-400);
  }
</style>
