---
import AdminLayout from '../../../layouts/roles/AdminLayout.astro';
---

<AdminLayout title="Calendario">
  <div class="calendario-page">
    <!-- Header -->
    <div class="page-header">
      <div class="header-info">
        <h1 class="page-title">Calendario de Reportes</h1>
        <p class="page-description">Vista mensual de vencimientos y entregas</p>
      </div>
      <div class="header-actions">
        <div class="view-toggle">
          <button class="view-btn active">Mes</button>
          <button class="view-btn">Semana</button>
          <button class="view-btn">Lista</button>
        </div>
      </div>
    </div>

    <!-- Navegación del calendario -->
    <div class="calendar-nav">
      <button class="nav-btn">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
          <polyline points="15,18 9,12 15,6"/>
        </svg>
      </button>
      <h2 class="current-month">Febrero 2025</h2>
      <button class="nav-btn">
        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" strokeWidth="2">
          <polyline points="9,18 15,12 9,6"/>
        </svg>
      </button>
      <button class="btn-today">Hoy</button>
    </div>

    <!-- Leyenda -->
    <div class="calendar-legend">
      <div class="legend-item">
        <span class="legend-dot pending"></span>
        <span>Pendiente</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot progress"></span>
        <span>En Progreso</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot sent"></span>
        <span>Enviado</span>
      </div>
      <div class="legend-item">
        <span class="legend-dot overdue"></span>
        <span>Vencido</span>
      </div>
    </div>

    <!-- Calendario -->
    <div class="calendar-container">
      <div class="calendar-header">
        <div class="day-header">Lun</div>
        <div class="day-header">Mar</div>
        <div class="day-header">Mié</div>
        <div class="day-header">Jue</div>
        <div class="day-header">Vie</div>
        <div class="day-header weekend">Sáb</div>
        <div class="day-header weekend">Dom</div>
      </div>
      <div class="calendar-grid">
        <!-- Semana 1 -->
        <div class="calendar-day other-month">
          <span class="day-number">27</span>
        </div>
        <div class="calendar-day other-month">
          <span class="day-number">28</span>
        </div>
        <div class="calendar-day other-month">
          <span class="day-number">29</span>
        </div>
        <div class="calendar-day other-month">
          <span class="day-number">30</span>
        </div>
        <div class="calendar-day other-month">
          <span class="day-number">31</span>
        </div>
        <div class="calendar-day weekend">
          <span class="day-number">1</span>
        </div>
        <div class="calendar-day weekend">
          <span class="day-number">2</span>
        </div>

        <!-- Semana 2 -->
        <div class="calendar-day">
          <span class="day-number">3</span>
        </div>
        <div class="calendar-day">
          <span class="day-number">4</span>
        </div>
        <div class="calendar-day has-events">
          <span class="day-number">5</span>
          <div class="day-events">
            <div class="event-item overdue">SUI-008</div>
          </div>
        </div>
        <div class="calendar-day">
          <span class="day-number">6</span>
        </div>
        <div class="calendar-day">
          <span class="day-number">7</span>
        </div>
        <div class="calendar-day weekend has-events">
          <span class="day-number">8</span>
          <div class="day-events">
            <div class="event-item sent">CREG-102</div>
          </div>
        </div>
        <div class="calendar-day weekend">
          <span class="day-number">9</span>
        </div>

        <!-- Semana 3 -->
        <div class="calendar-day today">
          <span class="day-number">10</span>
          <div class="day-events">
            <div class="event-item sent">ANH-012</div>
          </div>
        </div>
        <div class="calendar-day">
          <span class="day-number">11</span>
        </div>
        <div class="calendar-day has-events">
          <span class="day-number">12</span>
          <div class="day-events">
            <div class="event-item pending">SSPD-045</div>
          </div>
        </div>
        <div class="calendar-day">
          <span class="day-number">13</span>
        </div>
        <div class="calendar-day">
          <span class="day-number">14</span>
        </div>
        <div class="calendar-day weekend has-events">
          <span class="day-number">15</span>
          <div class="day-events">
            <div class="event-item progress">SUI-001</div>
            <div class="event-item pending">ANH-034</div>
          </div>
        </div>
        <div class="calendar-day weekend">
          <span class="day-number">16</span>
        </div>

        <!-- Semana 4 -->
        <div class="calendar-day">
          <span class="day-number">17</span>
        </div>
        <div class="calendar-day has-events">
          <span class="day-number">18</span>
          <div class="day-events">
            <div class="event-item progress">CREG-089</div>
          </div>
        </div>
        <div class="calendar-day">
          <span class="day-number">19</span>
        </div>
        <div class="calendar-day has-events">
          <span class="day-number">20</span>
          <div class="day-events">
            <div class="event-item pending">SUI-022</div>
            <div class="event-item pending">ANH-056</div>
            <div class="event-more">+2 más</div>
          </div>
        </div>
        <div class="calendar-day">
          <span class="day-number">21</span>
        </div>
        <div class="calendar-day weekend">
          <span class="day-number">22</span>
        </div>
        <div class="calendar-day weekend">
          <span class="day-number">23</span>
        </div>

        <!-- Semana 5 -->
        <div class="calendar-day">
          <span class="day-number">24</span>
        </div>
        <div class="calendar-day has-events">
          <span class="day-number">25</span>
          <div class="day-events">
            <div class="event-item progress">SSPD-067</div>
          </div>
        </div>
        <div class="calendar-day">
          <span class="day-number">26</span>
        </div>
        <div class="calendar-day">
          <span class="day-number">27</span>
        </div>
        <div class="calendar-day has-events">
          <span class="day-number">28</span>
          <div class="day-events">
            <div class="event-item pending">CREG-045</div>
            <div class="event-item progress">SUI-078</div>
          </div>
        </div>
        <div class="calendar-day weekend other-month">
          <span class="day-number">1</span>
        </div>
        <div class="calendar-day weekend other-month">
          <span class="day-number">2</span>
        </div>
      </div>
    </div>

    <!-- Panel de eventos del día -->
    <div class="events-panel">
      <h3 class="panel-title">Eventos de hoy - 10 de Febrero</h3>
      <div class="events-list">
        <div class="event-card sent">
          <div class="event-header">
            <span class="event-code">ANH-012</span>
            <span class="event-status">Enviado</span>
          </div>
          <h4 class="event-name">Informe de Producción</h4>
          <div class="event-meta">
            <span class="event-entidad">ANH</span>
            <span class="event-responsable">Pedro Martínez</span>
          </div>
        </div>
        <div class="event-card progress">
          <div class="event-header">
            <span class="event-code">SUI-001</span>
            <span class="event-status">En Progreso</span>
          </div>
          <h4 class="event-name">Informe Comercial de Gas Natural</h4>
          <div class="event-meta">
            <span class="event-entidad">SUI</span>
            <span class="event-responsable">Juan Rodríguez</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</AdminLayout>

<style>
  .calendario-page {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .page-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-900);
    margin: 0;
  }

  .page-description {
    font-size: 0.875rem;
    color: var(--neutral-500);
    margin: 0.25rem 0 0;
  }

  .view-toggle {
    display: flex;
    background: var(--neutral-100);
    border-radius: 8px;
    padding: 4px;
  }

  .view-btn {
    padding: 0.5rem 1rem;
    border: none;
    background: transparent;
    border-radius: 6px;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--neutral-600);
    cursor: pointer;
    transition: all 0.2s;
  }

  .view-btn.active {
    background: white;
    color: var(--neutral-900);
    box-shadow: var(--shadow-sm);
  }

  /* Calendar Navigation */
  .calendar-nav {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
  }

  .nav-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid var(--neutral-200);
    border-radius: 8px;
    background: white;
    cursor: pointer;
    transition: all 0.2s;
  }

  .nav-btn:hover {
    background: var(--neutral-100);
  }

  .current-month {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--neutral-900);
    margin: 0;
    min-width: 180px;
    text-align: center;
  }

  .btn-today {
    padding: 0.5rem 1rem;
    background: var(--color-primary-600);
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.875rem;
    cursor: pointer;
    margin-left: auto;
  }

  .btn-today:hover {
    background: var(--color-primary-700);
  }

  /* Legend */
  .calendar-legend {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.8125rem;
    color: var(--neutral-600);
  }

  .legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 3px;
  }

  .legend-dot.pending { background: var(--warning-yellow-500); }
  .legend-dot.progress { background: var(--color-primary-500); }
  .legend-dot.sent { background: var(--success-green-500); }
  .legend-dot.overdue { background: var(--error-red-500); }

  /* Calendar Container */
  .calendar-container {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    overflow: hidden;
  }

  .calendar-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background: var(--neutral-50);
    border-bottom: 1px solid var(--neutral-100);
  }

  .day-header {
    padding: 0.75rem;
    text-align: center;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--neutral-600);
  }

  .day-header.weekend {
    color: var(--neutral-400);
  }

  .calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
  }

  .calendar-day {
    min-height: 100px;
    padding: 0.5rem;
    border-right: 1px solid var(--neutral-100);
    border-bottom: 1px solid var(--neutral-100);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .calendar-day:nth-child(7n) {
    border-right: none;
  }

  .calendar-day.other-month {
    background: var(--neutral-50);
  }

  .calendar-day.other-month .day-number {
    color: var(--neutral-300);
  }

  .calendar-day.weekend {
    background: var(--neutral-25);
  }

  .calendar-day.today {
    background: var(--color-primary-50);
  }

  .calendar-day.today .day-number {
    background: var(--color-primary-600);
    color: white;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .day-number {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--neutral-700);
    margin-bottom: 0.25rem;
  }

  .day-events {
    display: flex;
    flex-direction: column;
    gap: 2px;
    overflow: hidden;
  }

  .event-item {
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.6875rem;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    cursor: pointer;
  }

  .event-item.pending {
    background: var(--warning-yellow-100);
    color: var(--warning-yellow-700);
  }

  .event-item.progress {
    background: var(--color-primary-100);
    color: var(--color-primary-700);
  }

  .event-item.sent {
    background: var(--success-green-100);
    color: var(--success-green-700);
  }

  .event-item.overdue {
    background: var(--error-red-100);
    color: var(--error-red-700);
  }

  .event-more {
    font-size: 0.625rem;
    color: var(--neutral-500);
    padding: 2px 6px;
    cursor: pointer;
  }

  .event-more:hover {
    color: var(--color-primary-600);
  }

  /* Events Panel */
  .events-panel {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    padding: 1.5rem;
  }

  .panel-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--neutral-800);
    margin: 0 0 1rem;
  }

  .events-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .event-card {
    padding: 1rem;
    border-radius: 8px;
    border-left: 4px solid;
  }

  .event-card.pending {
    background: var(--warning-yellow-50);
    border-left-color: var(--warning-yellow-500);
  }

  .event-card.progress {
    background: var(--color-primary-50);
    border-left-color: var(--color-primary-500);
  }

  .event-card.sent {
    background: var(--success-green-50);
    border-left-color: var(--success-green-500);
  }

  .event-card.overdue {
    background: var(--error-red-50);
    border-left-color: var(--error-red-500);
  }

  .event-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
  }

  .event-code {
    font-size: 0.75rem;
    font-weight: 600;
    font-family: monospace;
    color: var(--neutral-600);
  }

  .event-status {
    font-size: 0.6875rem;
    font-weight: 600;
    text-transform: uppercase;
  }

  .event-card.sent .event-status { color: var(--success-green-600); }
  .event-card.progress .event-status { color: var(--color-primary-600); }
  .event-card.pending .event-status { color: var(--warning-yellow-600); }
  .event-card.overdue .event-status { color: var(--error-red-600); }

  .event-name {
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--neutral-800);
    margin: 0 0 0.5rem;
  }

  .event-meta {
    display: flex;
    gap: 1rem;
    font-size: 0.75rem;
    color: var(--neutral-500);
  }
</style>
