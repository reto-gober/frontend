---
import AuditorLayout from '../../../layouts/roles/AuditorLayout.astro';
---

<AuditorLayout title="Dashboard Analítico">
  <div class="dashboard-page">
    <!-- Header -->
    <div class="page-header">
      <div class="header-info">
        <h1 class="page-title">Dashboard Analítico</h1>
        <p class="page-description">Vista general del estado de cumplimiento regulatorio</p>
      </div>
      <div class="header-actions">
        <div class="date-range">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
            <line x1="16" y1="2" x2="16" y2="6"/>
            <line x1="8" y1="2" x2="8" y2="6"/>
            <line x1="3" y1="10" x2="21" y2="10"/>
          </svg>
          <span>Febrero 2025</span>
          <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="6 9 12 15 18 9"/>
          </svg>
        </div>
        <button class="btn-export">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7,10 12,15 17,10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Exportar Informe
        </button>
      </div>
    </div>

    <!-- Global KPIs -->
    <div class="kpi-grid">
      <div class="kpi-card">
        <div class="kpi-icon blue">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value">156</span>
          <span class="kpi-label">Total Reportes</span>
        </div>
        <div class="kpi-trend neutral">
          <span>Este período</span>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon green">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value">142</span>
          <span class="kpi-label">Completados</span>
        </div>
        <div class="kpi-trend up">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
          </svg>
          <span>+8% vs mes anterior</span>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon yellow">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="12" cy="12" r="10"/>
            <polyline points="12,6 12,12 16,14"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value">9</span>
          <span class="kpi-label">En Proceso</span>
        </div>
        <div class="kpi-trend neutral">
          <span>Pendientes</span>
        </div>
      </div>
      <div class="kpi-card">
        <div class="kpi-icon red">
          <svg viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" strokeWidth="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
        </div>
        <div class="kpi-content">
          <span class="kpi-value">5</span>
          <span class="kpi-label">Atrasados</span>
        </div>
        <div class="kpi-trend down">
          <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/>
          </svg>
          <span>-3% vs mes anterior</span>
        </div>
      </div>
    </div>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Cumplimiento por Entidad Chart -->
      <div class="chart-card">
        <div class="card-header">
          <h3 class="card-title">Cumplimiento por Entidad</h3>
          <div class="card-actions">
            <button class="action-btn" title="Descargar">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="chart-content">
          <!-- Bar Chart Mock -->
          <div class="bar-chart">
            <div class="bar-item">
              <div class="bar-label">SUI</div>
              <div class="bar-track">
                <div class="bar-fill sui" style="width: 92%"></div>
              </div>
              <div class="bar-value">92%</div>
            </div>
            <div class="bar-item">
              <div class="bar-label">CREG</div>
              <div class="bar-track">
                <div class="bar-fill creg" style="width: 88%"></div>
              </div>
              <div class="bar-value">88%</div>
            </div>
            <div class="bar-item">
              <div class="bar-label">ANH</div>
              <div class="bar-track">
                <div class="bar-fill anh warning" style="width: 65%"></div>
              </div>
              <div class="bar-value warning">65%</div>
            </div>
            <div class="bar-item">
              <div class="bar-label">SSPD</div>
              <div class="bar-track">
                <div class="bar-fill sspd" style="width: 95%"></div>
              </div>
              <div class="bar-value">95%</div>
            </div>
            <div class="bar-item">
              <div class="bar-label">MinEnergía</div>
              <div class="bar-track">
                <div class="bar-fill minenergia" style="width: 100%"></div>
              </div>
              <div class="bar-value">100%</div>
            </div>
          </div>
          <div class="chart-threshold">
            <div class="threshold-line" style="left: 85%"></div>
            <span class="threshold-label">Meta: 85%</span>
          </div>
        </div>
      </div>

      <!-- Tendencia de Cumplimiento -->
      <div class="chart-card">
        <div class="card-header">
          <h3 class="card-title">Tendencia de Cumplimiento (6 meses)</h3>
          <div class="card-actions">
            <button class="action-btn" title="Descargar">
              <svg viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="chart-content">
          <!-- Line Chart Mock -->
          <div class="line-chart-mock">
            <div class="line-chart-labels">
              <span>100%</span>
              <span>75%</span>
              <span>50%</span>
              <span>25%</span>
              <span>0%</span>
            </div>
            <div class="line-chart-area">
              <svg viewBox="0 0 400 150" preserveAspectRatio="none">
                <!-- Grid lines -->
                <line x1="0" y1="37.5" x2="400" y2="37.5" stroke="#e5e7eb" strokeWidth="1"/>
                <line x1="0" y1="75" x2="400" y2="75" stroke="#e5e7eb" strokeWidth="1"/>
                <line x1="0" y1="112.5" x2="400" y2="112.5" stroke="#e5e7eb" strokeWidth="1"/>
                <!-- Trend line -->
                <polyline
                  points="0,60 67,52 133,45 200,38 267,30 333,25 400,22"
                  fill="none"
                  stroke="#A78BFA"
                  strokeWidth="3"
                  strokeLinecap="round"
                  strokeLinejoin="round"
                />
                <!-- Area fill -->
                <polygon
                  points="0,150 0,60 67,52 133,45 200,38 267,30 333,25 400,22 400,150"
                  fill="url(#areaGradient)"
                  opacity="0.2"
                />
                <defs>
                  <linearGradient id="areaGradient" x1="0" x2="0" y1="0" y2="1">
                    <stop offset="0%" stopColor="#A78BFA"/>
                    <stop offset="100%" stopColor="#A78BFA" stopOpacity="0"/>
                  </linearGradient>
                </defs>
              </svg>
            </div>
            <div class="line-chart-months">
              <span>Sep</span>
              <span>Oct</span>
              <span>Nov</span>
              <span>Dic</span>
              <span>Ene</span>
              <span>Feb</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Reportes por Estado -->
      <div class="chart-card">
        <div class="card-header">
          <h3 class="card-title">Distribución por Estado</h3>
        </div>
        <div class="chart-content">
          <div class="donut-chart-mock">
            <div class="donut-center">
              <span class="donut-value">156</span>
              <span class="donut-label">Total</span>
            </div>
            <svg viewBox="0 0 100 100" class="donut-svg">
              <circle cx="50" cy="50" r="40" fill="none" stroke="#e5e7eb" strokeWidth="12"/>
              <!-- Completados: 91% -->
              <circle cx="50" cy="50" r="40" fill="none" stroke="#4ade80" strokeWidth="12"
                      strokeDasharray="230.4 251.2" strokeDashoffset="0" transform="rotate(-90 50 50)"/>
              <!-- En Proceso: 6% -->
              <circle cx="50" cy="50" r="40" fill="none" stroke="#facc15" strokeWidth="12"
                      strokeDasharray="15.1 251.2" strokeDashoffset="-230.4" transform="rotate(-90 50 50)"/>
              <!-- Atrasados: 3% -->
              <circle cx="50" cy="50" r="40" fill="none" stroke="#f87171" strokeWidth="12"
                      strokeDasharray="7.5 251.2" strokeDashoffset="-245.5" transform="rotate(-90 50 50)"/>
            </svg>
          </div>
          <div class="chart-legend">
            <div class="legend-item">
              <span class="legend-color green"></span>
              <span class="legend-text">Completados</span>
              <span class="legend-value">142 (91%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color yellow"></span>
              <span class="legend-text">En Proceso</span>
              <span class="legend-value">9 (6%)</span>
            </div>
            <div class="legend-item">
              <span class="legend-color red"></span>
              <span class="legend-text">Atrasados</span>
              <span class="legend-value">5 (3%)</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Equipos -->
      <div class="chart-card">
        <div class="card-header">
          <h3 class="card-title">Rendimiento por Equipo</h3>
        </div>
        <div class="chart-content">
          <div class="team-ranking">
            <div class="rank-item">
              <span class="rank-position">1</span>
              <div class="rank-info">
                <span class="rank-name">Equipo Comercial</span>
                <span class="rank-supervisor">Sup: Carlos Mendoza</span>
              </div>
              <div class="rank-stats">
                <span class="rank-value">98%</span>
                <div class="rank-bar">
                  <div class="rank-fill" style="width: 98%"></div>
                </div>
              </div>
            </div>
            <div class="rank-item">
              <span class="rank-position">2</span>
              <div class="rank-info">
                <span class="rank-name">Equipo Técnico</span>
                <span class="rank-supervisor">Sup: Ana Martínez</span>
              </div>
              <div class="rank-stats">
                <span class="rank-value">94%</span>
                <div class="rank-bar">
                  <div class="rank-fill" style="width: 94%"></div>
                </div>
              </div>
            </div>
            <div class="rank-item">
              <span class="rank-position">3</span>
              <div class="rank-info">
                <span class="rank-name">Equipo Operaciones</span>
                <span class="rank-supervisor">Sup: Luis Torres</span>
              </div>
              <div class="rank-stats">
                <span class="rank-value">89%</span>
                <div class="rank-bar">
                  <div class="rank-fill" style="width: 89%"></div>
                </div>
              </div>
            </div>
            <div class="rank-item warning">
              <span class="rank-position">4</span>
              <div class="rank-info">
                <span class="rank-name">Equipo HSE</span>
                <span class="rank-supervisor">Sup: María Gómez</span>
              </div>
              <div class="rank-stats">
                <span class="rank-value warning">72%</span>
                <div class="rank-bar">
                  <div class="rank-fill warning" style="width: 72%"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Section -->
    <div class="bottom-grid">
      <!-- Reportes Críticos -->
      <div class="list-card">
        <div class="card-header">
          <h3 class="card-title">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
            Reportes Críticos (Atrasados o Próximos)
          </h3>
          <a href="/roles/auditor/reportes" class="view-all">Ver todos →</a>
        </div>
        <div class="list-content">
          <table class="data-table">
            <thead>
              <tr>
                <th>Código</th>
                <th>Reporte</th>
                <th>Entidad</th>
                <th>Responsable</th>
                <th>Estado</th>
                <th>Vencimiento</th>
              </tr>
            </thead>
            <tbody>
              <tr class="urgent">
                <td><span class="code">SUI-001</span></td>
                <td>Informe Comercial de Gas Natural</td>
                <td><span class="badge sui">SUI</span></td>
                <td>María López</td>
                <td><span class="status-badge pending">Pendiente</span></td>
                <td class="date urgent">Hoy</td>
              </tr>
              <tr class="warning">
                <td><span class="code">ANH-012</span></td>
                <td>Informe de Producción</td>
                <td><span class="badge anh">ANH</span></td>
                <td>Ana García</td>
                <td><span class="status-badge observations">Con Obs.</span></td>
                <td class="date warning">14 Feb</td>
              </tr>
              <tr>
                <td><span class="code">CREG-045</span></td>
                <td>Resolución Tarifaria</td>
                <td><span class="badge creg">CREG</span></td>
                <td>Juan Rodríguez</td>
                <td><span class="status-badge review">En Revisión</span></td>
                <td class="date">15 Feb</td>
              </tr>
              <tr>
                <td><span class="code">SSPD-023</span></td>
                <td>Balance de Usuarios</td>
                <td><span class="badge sspd">SSPD</span></td>
                <td>Carlos Pérez</td>
                <td><span class="status-badge review">En Revisión</span></td>
                <td class="date">17 Feb</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Actividad Reciente -->
      <div class="list-card">
        <div class="card-header">
          <h3 class="card-title">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
            Actividad Reciente
          </h3>
        </div>
        <div class="activity-list">
          <div class="activity-item">
            <div class="activity-icon green">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="9,11 12,14 22,4"/>
              </svg>
            </div>
            <div class="activity-content">
              <span class="activity-text"><strong>CREG-102</strong> enviado exitosamente a entidad</span>
              <span class="activity-time">Hace 2 horas</span>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon blue">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              </svg>
            </div>
            <div class="activity-content">
              <span class="activity-text">Nuevo reporte <strong>SUI-015</strong> creado</span>
              <span class="activity-time">Hace 4 horas</span>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon yellow">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
            </div>
            <div class="activity-content">
              <span class="activity-text">Observación agregada a <strong>ANH-012</strong></span>
              <span class="activity-time">Hace 6 horas</span>
            </div>
          </div>
          <div class="activity-item">
            <div class="activity-icon green">
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="9,11 12,14 22,4"/>
              </svg>
            </div>
            <div class="activity-content">
              <span class="activity-text"><strong>SUI-008</strong> aprobado por supervisor</span>
              <span class="activity-time">Hace 8 horas</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</AuditorLayout>

<style>
  .dashboard-page {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  .page-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-900);
    margin: 0;
  }

  .page-description {
    font-size: 0.875rem;
    color: var(--neutral-500);
    margin: 0.25rem 0 0;
  }

  .header-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .date-range {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1rem;
    background: white;
    border: 1px solid var(--neutral-200);
    border-radius: 8px;
    font-size: 0.875rem;
    color: var(--neutral-600);
    cursor: pointer;
  }

  .btn-export {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.625rem 1rem;
    background: var(--role-accent);
    border: none;
    border-radius: 8px;
    font-size: 0.875rem;
    font-weight: 500;
    color: white;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-export:hover {
    background: #9575e0;
  }

  /* KPI Grid */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
  }

  .kpi-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    padding: 1.25rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .kpi-icon {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
  }

  .kpi-icon.blue {
    background: var(--color-primary-100);
    color: var(--color-primary-600);
  }

  .kpi-icon.green {
    background: var(--success-green-100);
    color: var(--success-green-600);
  }

  .kpi-icon.yellow {
    background: var(--warning-yellow-100);
    color: var(--warning-yellow-700);
  }

  .kpi-icon.red {
    background: var(--error-red-100);
    color: var(--error-red-600);
  }

  .kpi-content {
    display: flex;
    flex-direction: column;
  }

  .kpi-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--neutral-900);
    line-height: 1;
  }

  .kpi-label {
    font-size: 0.875rem;
    color: var(--neutral-500);
    margin-top: 0.25rem;
  }

  .kpi-trend {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.75rem;
  }

  .kpi-trend.up {
    color: var(--success-green-600);
  }

  .kpi-trend.down {
    color: var(--error-red-600);
  }

  .kpi-trend.neutral {
    color: var(--neutral-500);
  }

  /* Content Grid */
  .content-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  .chart-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    overflow: hidden;
  }

  .card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 1.25rem;
    border-bottom: 1px solid var(--neutral-100);
  }

  .card-title {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9375rem;
    font-weight: 600;
    color: var(--neutral-800);
    margin: 0;
  }

  .card-actions {
    display: flex;
    gap: 0.5rem;
  }

  .action-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--neutral-100);
    border: none;
    border-radius: 6px;
    color: var(--neutral-500);
    cursor: pointer;
    transition: all 0.2s;
  }

  .action-btn:hover {
    background: var(--neutral-200);
    color: var(--neutral-700);
  }

  .chart-content {
    padding: 1.25rem;
  }

  /* Bar Chart */
  .bar-chart {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .bar-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .bar-label {
    width: 80px;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--neutral-700);
  }

  .bar-track {
    flex: 1;
    height: 24px;
    background: var(--neutral-100);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
  }

  .bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.5s ease;
  }

  .bar-fill.sui { background: #3b82f6; }
  .bar-fill.creg { background: #8b5cf6; }
  .bar-fill.anh { background: #f59e0b; }
  .bar-fill.anh.warning { background: #facc15; }
  .bar-fill.sspd { background: #ef4444; }
  .bar-fill.minenergia { background: #22c55e; }

  .bar-value {
    width: 45px;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--neutral-700);
    text-align: right;
  }

  .bar-value.warning {
    color: var(--warning-yellow-700);
  }

  .chart-threshold {
    position: relative;
    margin-top: 0.75rem;
    padding-left: 80px;
  }

  .threshold-line {
    position: absolute;
    top: -60px;
    height: 85px;
    border-left: 2px dashed var(--neutral-300);
  }

  .threshold-label {
    position: absolute;
    left: calc(85% - 30px);
    top: 0;
    font-size: 0.6875rem;
    color: var(--neutral-400);
  }

  /* Line Chart */
  .line-chart-mock {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .line-chart-labels {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    font-size: 0.625rem;
    color: var(--neutral-400);
    height: 150px;
    position: absolute;
    left: 0;
  }

  .line-chart-area {
    margin-left: 30px;
    height: 150px;
  }

  .line-chart-area svg {
    width: 100%;
    height: 100%;
  }

  .line-chart-months {
    display: flex;
    justify-content: space-between;
    margin-left: 30px;
    font-size: 0.75rem;
    color: var(--neutral-500);
    margin-top: 0.5rem;
  }

  /* Donut Chart */
  .donut-chart-mock {
    position: relative;
    width: 160px;
    height: 160px;
    margin: 0 auto 1rem;
  }

  .donut-svg {
    width: 100%;
    height: 100%;
  }

  .donut-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
  }

  .donut-value {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--neutral-800);
  }

  .donut-label {
    display: block;
    font-size: 0.75rem;
    color: var(--neutral-500);
  }

  .chart-legend {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .legend-color {
    width: 12px;
    height: 12px;
    border-radius: 3px;
  }

  .legend-color.green { background: #4ade80; }
  .legend-color.yellow { background: #facc15; }
  .legend-color.red { background: #f87171; }

  .legend-text {
    flex: 1;
    font-size: 0.8125rem;
    color: var(--neutral-600);
  }

  .legend-value {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--neutral-700);
  }

  /* Team Ranking */
  .team-ranking {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .rank-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem;
    background: var(--neutral-50);
    border-radius: 8px;
  }

  .rank-item.warning {
    background: var(--warning-yellow-50);
  }

  .rank-position {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--role-accent);
    color: white;
    border-radius: 50%;
    font-size: 0.75rem;
    font-weight: 700;
  }

  .rank-info {
    flex: 1;
    min-width: 0;
  }

  .rank-name {
    display: block;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--neutral-800);
  }

  .rank-supervisor {
    display: block;
    font-size: 0.6875rem;
    color: var(--neutral-500);
  }

  .rank-stats {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 0.25rem;
    width: 80px;
  }

  .rank-value {
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--success-green-600);
  }

  .rank-value.warning {
    color: var(--warning-yellow-700);
  }

  .rank-bar {
    width: 100%;
    height: 4px;
    background: var(--neutral-200);
    border-radius: 2px;
    overflow: hidden;
  }

  .rank-fill {
    height: 100%;
    background: var(--success-green-500);
    border-radius: 2px;
  }

  .rank-fill.warning {
    background: var(--warning-yellow-500);
  }

  /* Bottom Grid */
  .bottom-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1rem;
  }

  .list-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow-card);
    overflow: hidden;
  }

  .view-all {
    font-size: 0.8125rem;
    color: var(--role-accent);
    text-decoration: none;
    font-weight: 500;
  }

  .view-all:hover {
    text-decoration: underline;
  }

  .list-content {
    overflow-x: auto;
  }

  .data-table {
    width: 100%;
    border-collapse: collapse;
  }

  .data-table th {
    padding: 0.75rem 1rem;
    text-align: left;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--neutral-500);
    background: var(--neutral-50);
    text-transform: uppercase;
  }

  .data-table td {
    padding: 0.75rem 1rem;
    font-size: 0.8125rem;
    color: var(--neutral-700);
    border-top: 1px solid var(--neutral-100);
  }

  .data-table tr.urgent td {
    background: var(--error-red-50);
  }

  .data-table tr.warning td {
    background: var(--warning-yellow-50);
  }

  .code {
    font-family: monospace;
    font-weight: 600;
    color: var(--neutral-600);
  }

  .badge {
    display: inline-block;
    padding: 0.125rem 0.5rem;
    border-radius: 4px;
    font-size: 0.6875rem;
    font-weight: 600;
    color: white;
  }

  .badge.sui { background: #3b82f6; }
  .badge.creg { background: #8b5cf6; }
  .badge.anh { background: #f59e0b; }
  .badge.sspd { background: #ef4444; }

  .status-badge {
    display: inline-block;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.6875rem;
    font-weight: 600;
  }

  .status-badge.pending {
    background: var(--warning-yellow-100);
    color: var(--warning-yellow-800);
  }

  .status-badge.observations {
    background: var(--error-red-100);
    color: var(--error-red-700);
  }

  .status-badge.review {
    background: var(--color-primary-100);
    color: var(--color-primary-700);
  }

  .date {
    font-weight: 500;
  }

  .date.urgent {
    color: var(--error-red-600);
    font-weight: 700;
  }

  .date.warning {
    color: var(--warning-yellow-700);
  }

  /* Activity List */
  .activity-list {
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .activity-item {
    display: flex;
    gap: 0.75rem;
    align-items: flex-start;
  }

  .activity-icon {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .activity-icon.green {
    background: var(--success-green-100);
    color: var(--success-green-600);
  }

  .activity-icon.blue {
    background: var(--color-primary-100);
    color: var(--color-primary-600);
  }

  .activity-icon.yellow {
    background: var(--warning-yellow-100);
    color: var(--warning-yellow-700);
  }

  .activity-content {
    flex: 1;
    min-width: 0;
  }

  .activity-text {
    display: block;
    font-size: 0.8125rem;
    color: var(--neutral-700);
    line-height: 1.4;
  }

  .activity-time {
    display: block;
    font-size: 0.6875rem;
    color: var(--neutral-400);
    margin-top: 0.25rem;
  }

  @media (max-width: 1200px) {
    .kpi-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .content-grid {
      grid-template-columns: 1fr;
    }

    .bottom-grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 768px) {
    .page-header {
      flex-direction: column;
      gap: 1rem;
    }

    .header-actions {
      flex-wrap: wrap;
    }

    .kpi-grid {
      grid-template-columns: 1fr;
    }
  }
</style>
